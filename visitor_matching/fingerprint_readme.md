## Fingerprint Matching

Returns the match score between a fingerprint hash associated with a new visitor ID and the closest match among all the previous fingerprint hashes we are attempting to identify a match for. The score is between [0, 100] and corresponds to the number of matching elements between the two fingerprints. Optionally, weights can be used to make certain features more or less important to match. 

To deploy:
```
zip fingerprint-match.zip lambda_function.py utils.py fingerprint_compare.py
aws lambda create-function --function-name visitor_fingerprint_matching --zip-file fileb://fingerprint-match.zip --handler lambda_function.lambda_handler --runtime python3.8 --role arn:aws:iam::{your_iam_id}:role/lambda-fingerprint-matching
```

Unfinished TODOs:
- Testing (unit tests etc)
- Identify appropriate weights
- better handling of missing/unexpected values

Example input:
```
{
  "previous_fingerprints": [
    {
      "browser": "Chrome",
      "browserVersion": "99.1.4430.93",
      "browserMajorVersion": 90,
      "isIE": 0,
      "isChrome": 1,
      "isFirefox": 0,
      "isSafari": 0,
      "isOpera": 0,
      "engine": "Blink",
      "engineVersion": "90.1.4430.93",
      "os": "Mac OS",
      "osVersion": "10.15.6",
      "isWindows": 0,
      "isMac": 1,
      "isLinux": 0,
      "isUbuntu": 0,
      "isSolaris": 0,
      "IsMobile": 0,
      "isMobileMajor": 0,
      "isMobileAndroid": 0,
      "isMobileOpera": 0,
      "isMobileWindows": 0,
      "isMobileBlackBerry": 0,
      "isMobileIOS": 0,
      "isIphone": 0,
      "isIpad": 0,
      "isIpod": 0,
      "colorDepth": 30,
      "currentResolution": "1792x1120",
      "availableResolution": "1792x1120",
      "plugins": "Chrome PDF Plugin, Chrome PDF Viewer, Native Client1, Native Client2",
      "isJava": 0,
      "isFlash": 0,
      "isSilverlight": 0,
      "mimeTypes": "Portable Document Format, Native Client Executable, Portable Native Client Executable",
      "isMimeTypes": 1,
      "fonts": "Arial Black, Arial, Bauhaus 93, Chalkduster, Comic Sans MS, Courier New, Georgia, GungSeo, Hiragino Sans GB, Impact, Menlo, Microsoft Sans Serif, Papyrus, Plantagenet Cherokee, Rockwell, Symbol, Tahoma, Times New Roman, Trebuchet MS, Verdana, Webdings, Wingdings",
      "isLocalStorage": 1,
      "isSessionStorage": 1,
      "isCookie": 1,
      "timeZone": "-07",
      "language": "en-US",
      "systemLanguage": "en-US",
      "isCanvas": 1
    },
    {
      "browser": "Chrome",
      "browserVersion": "99.1.4430.93",
      "browserMajorVersion": 90,
      "isIE": 0,
      "isChrome": 1,
      "isFirefox": 0,
      "isSafari": 0,
      "isOpera": 0,
      "engine": "Blink",
      "engineVersion": "90.1.4430.93",
      "os": "Mac OS",
      "osVersion": "10.15.6",
      "isWindows": 0,
      "isMac": 1,
      "isLinux": 0,
      "isUbuntu": 0,
      "isSolaris": 0,
      "IsMobile": 0,
      "isMobileMajor": 0,
      "isMobileAndroid": 0,
      "isMobileOpera": 0,
      "isMobileWindows": 0,
      "isMobileBlackBerry": 0,
      "isMobileIOS": 0,
      "isIphone": 0,
      "isIpad": 0,
      "isIpod": 0,
      "colorDepth": 30,
      "currentResolution": "1792x1120",
      "availableResolution": "1792x1120",
      "plugins": "Chrome PDF Plugin, Chrome PDF Viewer, Native Client1, Native Client2",
      "isJava": 0,
      "isFlash": 0,
      "isSilverlight": 0,
      "mimeTypes": "Portable Document Format, Native Client Executable, Portable Native Client Executable",
      "isMimeTypes": 1,
      "fonts": "Arial Black, Arial, Bauhaus 93, Chalkduster, Comic Sans MS, Courier New, Georgia, GungSeo, Hiragino Sans GB, Impact, Menlo, Microsoft Sans Serif, Papyrus, Plantagenet Cherokee, Rockwell, Symbol, Tahoma, Times New Roman, Trebuchet MS, Verdana, Webdings, Wingdings",
      "isLocalStorage": 1,
      "isSessionStorage": 1,
      "isCookie": 1,
      "timeZone": "-07",
      "language": "en-US",
      "systemLanguage": "en-US",
      "isCanvas": 1
    }
  ],
  "new_fingerprint": {
    "browser": "Chrome",
    "browserVersion": "91.1.4430.93",
    "browserMajorVersion": 90,
    "isIE": 0,
    "isChrome": 1,
    "isFirefox": 0,
    "isSafari": 0,
    "isOpera": 0,
    "engine": "Blink",
    "engineVersion": "91.1.4430.93",
    "os": "Mac OS",
    "osVersion": "10.15.7",
    "isWindows": 0,
    "isMac": 1,
    "isLinux": 0,
    "isUbuntu": 0,
    "isSolaris": 0,
    "IsMobile": 0,
    "isMobileMajor": 0,
    "isMobileAndroid": 0,
    "isMobileOpera": 0,
    "isMobileWindows": 0,
    "isMobileBlackBerry": 0,
    "isMobileIOS": 0,
    "isIphone": 0,
    "isIpad": 0,
    "isIpod": 0,
    "colorDepth": 30,
    "currentResolution": "1792x1120",
    "availableResolution": "1792x1120",
    "plugins": "Chrome PDF Plugin, Chrome PDF Viewer, Native Client1",
    "isJava": 0,
    "isFlash": 0,
    "isSilverlight": 0,
    "mimeTypes": "Portable Document Format, Native Client Executable, Portable Native Client Executable",
    "isMimeTypes": 1,
    "fonts": "Arial Black, Arial, Bauhaus 93, Chalkduster, Comic Sans MS, Courier New, Georgia, GungSeo, Hiragino Sans GB, Impact, Menlo, Microsoft Sans Serif, Papyrus, Plantagenet Cherokee, Rockwell, Symbol, Tahoma, Times New Roman, Trebuchet MS, Verdana, Webdings, Wingdings",
    "isLocalStorage": 1,
    "isSessionStorage": 1,
    "isCookie": 1,
    "timeZone": "-07",
    "language": "en-US",
    "systemLanguage": "en-US",
    "isCanvas": 1
  },
  "weights": {
    "browserVersion": 5,
    "browserMajorVersion": 5.9,
    "isIE": 0,
    "isChrome": 1,
    "isFirefox": 0,
    "isSafari": 0,
    "isOpera": 0,
    "engine": 1,
    "engineVersion": 1,
    "osVersion": 1,
    "isWindows": 0,
    "isMac": 1,
    "isLinux": 0,
    "isUbuntu": 0,
    "isSolaris": 0,
    "IsMobile": 0,
    "isMobileMajor": 0,
    "isMobileAndroid": 0,
    "isMobileOpera": 0,
    "isMobileWindows": 0,
    "isMobileBlackBerry": 0,
    "isMobileIOS": 0,
    "isIphone": 0,
    "isIpad": 0,
    "isIpod": 0,
    "colorDepth": 1,
    "currentResolution": 1,
    "plugins": 1,
    "isJava": 0,
    "isFlash": 0,
    "isSilverlight": 0,
    "mimeTypes": 1,
    "isMimeTypes": 1,
    "fonts": 1,
    "isLocalStorage": 1,
    "isSessionStorage": 1,
    "isCookie": 1,
    "timeZone": 1,
    "language": 1,
    "systemLanguage": 1,
    "isCanvas": 1
  }
}
```
Expected output:
```
{
  "statusCode": 200,
  "body": {
    "match_results": {
      "browserVersion": false,
      "browserMajorVersion": true,
      "isIE": true,
      "isChrome": true,
      "isFirefox": true,
      "isSafari": true,
      "isOpera": true,
      "engine": true,
      "engineVersion": true,
      "osVersion": true,
      "isWindows": true,
      "isMac": true,
      "isLinux": true,
      "isUbuntu": true,
      "isSolaris": true,
      "IsMobile": true,
      "isMobileMajor": true,
      "isMobileAndroid": true,
      "isMobileOpera": true,
      "isMobileWindows": true,
      "isMobileBlackBerry": true,
      "isMobileIOS": true,
      "isIphone": true,
      "isIpad": true,
      "isIpod": true,
      "colorDepth": true,
      "currentResolution": true,
      "plugins": true,
      "isJava": true,
      "isFlash": true,
      "isSilverlight": true,
      "mimeTypes": true,
      "isMimeTypes": true,
      "fonts": true,
      "isLocalStorage": true,
      "isSessionStorage": true,
      "isCookie": true,
      "timeZone": true,
      "language": true,
      "systemLanguage": true,
      "isCanvas": true
    },
    "match_score": 82.69999999999999
  }
}
```

